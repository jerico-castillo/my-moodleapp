<div *ngIf="showCompletionConditions && completion && completion.isautomatic" class="core-module-automatic-completion-conditions"
    role="list" [attr.aria-label]="'core.course.completionrequirements' | translate:{ $a: moduleName }">

    <ng-container *ngIf="completion.istrackeduser">
        <ng-container *ngFor="let rule of details">
            <ion-badge *ngIf="rule.statuscomplete" color="success" role="listitem"
                [attr.aria-label]="rule.accessibleDescription">
                <strong>{{ 'core.course.completion_automatic:done' | translate }}</strong> {{ rule.rulevalue.description }}
            </ion-badge>

            <ion-badge *ngIf="rule.statuscompletefail" color="danger" role="listitem"
                [attr.aria-label]="rule.accessibleDescription">
                <strong>{{ 'core.course.completion_automatic:failed' | translate }}</strong> {{ rule.rulevalue.description }}
            </ion-badge>

            <ion-badge *ngIf="rule.statusincomplete" color="medium" role="listitem"
                [attr.aria-label]="rule.accessibleDescription">
                <strong>{{ 'core.course.completion_automatic:todo' | translate }}</strong> {{ rule.rulevalue.description }}
            </ion-badge>
        </ng-container>
    </ng-container>

    <ng-container *ngIf="!completion.istrackeduser">
        <ion-badge *ngFor="let rule of details" color="light" role="listitem">
            {{ rule.rulevalue.description }}
        </ion-badge>
    </ng-container>
</div>

<div *ngIf="completion && !completion.isautomatic && (showCompletionConditions || showManualCompletion)"
    class="core-module-manual-completion">

    <ng-container *ngIf="completion.istrackeduser">
        <ng-container *ngIf="completion.state">
            <ion-button color="success" fill="outline" [attr.aria-label]="accessibleDescription"
                (click)="completionClicked($event)">
                <ion-icon name="fas-check" slot="start" aria-hidden="true"></ion-icon>
                {{ 'core.course.completion_manual:done' | translate }}
            </ion-button>
        </ng-container>
        <ng-container *ngIf="!completion.state">
            <ion-button color="light" [attr.aria-label]="accessibleDescription" (click)="completionClicked($event)">
                {{ 'core.course.completion_manual:markdone' | translate }}
            </ion-button>
        </ng-container>
    </ng-container>

    <ng-container *ngIf="!completion.istrackeduser">
        <ion-button disabled="true" color="light">
            {{ 'core.course.completion_manual:markdone' | translate }}
        </ion-button>
    </ng-container>
</div>
